# chapter05_BmiCalculator 

난이도 : ★☆☆

프로젝트명 : BmiCalculator

기능

- 키와 몸무게를 입력하고 결과 버튼을 누르면 다른 화면에서 비만도 결과를 문자와 그림으로 보여준다.
- 마지막에 입력했던 키와 몸무게는 자동으로 저장된다.

핵심 구성요소

- ConstraintLayout : 제약에 따라 뷰를 배치하는 레이아웃이다.
- Intent : 화면을 전환에 사용하고, 간단한 데이터를 전달할 수 있다.
- SharedPreference : 간단한 데이터를 저장할 수 있다.

라이브러리 설정

- Anko : 인텐트, 다이얼로그, 로그 등을 구현하는 데 도움이 되는 라이브러리





## 해법 요약

비만도 계산기 앱은 키와 몸무게를 입력하는 화면과 비만도 결과를 보여주는 화면으로 구성되어 있다. 

즉, 액티비티가 두 개 필요하다.

이번 프로젝트에서는 비만도를 측정하는 앱을 만들면서 인텐트에 데이터를 담아서 다른 화면으로 전달하는 방법을 다룬다. 그리고 본격적으로 레이아웃의 작성을 하며 ConstraintLayout을 사용하는 방법을 익힌다. 코드를 더 간단하게 작성할 수 있도록 Anko 라이브러리도 사용한다.



#### 구현순서

1. 준비하기 : 프로젝트 생성 및 안드로이드 설정
2. 스텝 1 : 키와 몸무게를 입력하는 화면 작성
3. 스텝 2 : 결과 화면 작성
4. 스텝 3 : 인텐트로 화면 전환
5. 스텝 4 : SharedPreference로 데이터를 저장하기





#### Anko 라이브러리

Anko 라이브러리는 코틀린을 개발한 젯브레인에서 개발했다. 코드 작성을 편리하게 도와준다. 다음과 같은 4가지 라이브러리로 구성된다.

- Anko Commons : 인텐트, 다이얼로그, 로그 등을 편리하게 사용하는 라이브러리
- Anko Layouts : 안드로이드 레이아웃을 코드로 쉽게 작성하는 라이브러리
- Anko SQLite : SQLite를 쉽게 사용하는 라이브러리
- Anko Coroutines : 코루틴을 쉽게 사용하는 라이브러리

https://github.com/Kotlin/anko 사이트로 들어가 연결하기 (README.md파일 읽어보기)





------



## 인텐트로 화면 전환

두 화면을 전환하려면 인텐트(Intent)를 사용한다. 인텐트는 다른 액티비티를 시작할 수 있고, 간단한 데이터를 담아서 보낼 수도 있다. 인텐트는 안드로이드 앱 개발에서 가장 기본이면서 많이 사용 된다.

구현하는 순서

1. 버튼을 누르면 결과 화면으로 전환하는 코드
2. 이전 화면으로 돌아가기 위한 업 네비게이션
3. 인텐트에 데이터 담기
4. 인텐트로부터 데이터 꺼내기
5. 비만도를 계산하여 분기 처리하기
6. Toast를 사용하여 간단한 메세지 표시하기







------





## SharedPreference로 데이터 저장하기

마지막으로 입력했던 키와 몸무게가 다음 번 앱을 실행했을 때 남아있도록 SharedPreference에 저장하고 복원하는 기능을 만들 것이다. 설정값과 같이 간단한 데이터를 저장할 때 주로 사용한다. 구현 순서는 다음과 같다.

1. 데이터 저장하기
2. 데이터 불러오기





------





## 에뮬레이터로 앱 실행



##### 1) 앱 시작 화면

![01](https://user-images.githubusercontent.com/49340180/62093736-641da580-b2b5-11e9-93bb-d544cb6f224a.PNG)





##### 2) 몸무게와 키 입력

![02](https://user-images.githubusercontent.com/49340180/62093760-75ff4880-b2b5-11e9-9695-b57e25738347.PNG)



##### 3-1) 결과버튼을 눌러 확인한 BMI값이 정상일 경우

![normal](https://user-images.githubusercontent.com/49340180/62093794-8ca59f80-b2b5-11e9-9e88-9b80ebb4cb46.PNG)

##### 3-2) BMI값이 저체중일 경우

![저체중](https://user-images.githubusercontent.com/49340180/62093816-a1823300-b2b5-11e9-937f-f657ec77d7ee.PNG)

##### 3-3) BMI값이 1단계 비만일 경우

![1단계](https://user-images.githubusercontent.com/49340180/62093839-b8288a00-b2b5-11e9-9cd6-ed3925a4ac74.PNG)

##### 3-4) BMI값이 2단계 비만일 경우

![2단계](https://user-images.githubusercontent.com/49340180/62093853-c70f3c80-b2b5-11e9-8179-13a170028afd.PNG)

##### 3-5) BMI값이 고도비만일 경우

![고도](https://user-images.githubusercontent.com/49340180/62093869-d5f5ef00-b2b5-11e9-9680-aecccc4a6c7d.PNG)


#####4) 다시 맨 처음 화면으로 돌아가도 입력했던 값이 남아있다.




------





## 마치며

이번 프로젝트에서는 첫 앱을 작성하면서 다음과 같이 기본적인 내용을 다뤘다. 자주 사용하는 내용이니까 사용 방법을 익혀야 한다.

- 이미지 뷰에 표시할 아이콘은 에셋 스튜디오에서 생성할 수 있다.
- 안드로이드 5.0 미만의 기기에서는 벡터 드로어블을 사용하려면 그레이들 설정에 vectorDrawables, useSupportLibrary = true를 추가해야 한다
- 액티비티 간 화면 전환 및 데이터 전달을 하는 데 인텐트를 사용
- 간단한 데이터를 저장 및 복원할 때는 SharedPreference를 사용한다

